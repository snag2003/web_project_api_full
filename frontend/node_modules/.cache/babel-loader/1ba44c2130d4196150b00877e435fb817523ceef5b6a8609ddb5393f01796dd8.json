{"ast":null,"code":"import _objectSpread from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var _this=this;var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this.updatedAuthUserToken=function(token){_this.headers=_objectSpread(_objectSpread({},_this.headers),{},{Authorization:\"Bearer \".concat(token)});};this.baseUrl=baseUrl;this.headers=headers||{};}_createClass(Api,[{key:\"_handleResponse\",value:function _handleResponse(res){if(!res.ok){return res.json().then(function(error){var errorMessage=\"Error: \".concat(res.status,\" - \").concat(error.message);throw new Error(errorMessage);});}return res.json();}},{key:\"_handleRequest\",value:function _handleRequest(url,method){var _this2=this;var body=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var token=localStorage.getItem(\"jwt\");var headers=_objectSpread({\"Content-Type\":\"application/json\",Authorization:token?\"Bearer \".concat(token):undefined},this.headers);var requestOptions={method:method,headers:headers};if(body){requestOptions.body=JSON.stringify(body);}return fetch(\"\".concat(this.baseUrl).concat(url),requestOptions).then(function(response){return _this2._handleResponse(response);}).catch(function(error){console.error(error);});}},{key:\"getInitialCards\",value:function getInitialCards(){return this._handleRequest(\"/cards\",\"GET\");}},{key:\"getUserInfo\",value:function getUserInfo(){return this._handleRequest(\"/users/me\",\"GET\");}},{key:\"editUserInfo\",value:function editUserInfo(data){return this._handleRequest(\"/users/me\",\"PATCH\",{name:data.name,about:data.about});}},{key:\"editAvatar\",value:function editAvatar(avatar){return this._handleRequest(\"/users/me/avatar\",\"PATCH\",{avatar:avatar});}},{key:\"postNewCard\",value:function postNewCard(card){return this._handleRequest(\"/cards\",\"POST\",{name:card.name,link:card.link});}},{key:\"deleteCard\",value:function deleteCard(cardId){return this._handleRequest(\"/cards/\".concat(cardId),\"DELETE\");}},{key:\"setCardIcons\",value:function setCardIcons(){return this._handleRequest(\"/users/me\",\"GET\");}},{key:\"cardLiked\",value:function cardLiked(cardId){return this._handleRequest(\"/cards/likes/\".concat(cardId),\"PUT\");}},{key:\"cardUnliked\",value:function cardUnliked(cardId){return this._handleRequest(\"/cards/likes/\".concat(cardId),\"DELETE\");}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){return this._handleRequest(\"/cards/likes/\".concat(cardId),isLiked?\"PUT\":\"DELETE\");}}]);return Api;}();var api=new Api({baseUrl:process.env.REACT_APP_API_BASE_URL||\"https://api.stephanydev.justlearning.net\"});export default api;","map":{"version":3,"names":["Api","_ref","_this","baseUrl","headers","_classCallCheck","updatedAuthUserToken","token","_objectSpread","Authorization","concat","_createClass","key","value","_handleResponse","res","ok","json","then","error","errorMessage","status","message","Error","_handleRequest","url","method","_this2","body","arguments","length","undefined","localStorage","getItem","requestOptions","JSON","stringify","fetch","response","catch","console","getInitialCards","getUserInfo","editUserInfo","data","name","about","editAvatar","avatar","postNewCard","card","link","deleteCard","cardId","setCardIcons","cardLiked","cardUnliked","changeLikeCardStatus","isLiked","api","process","env","REACT_APP_API_BASE_URL"],"sources":["/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers || {};\n  }\n\n  _handleResponse(res) {\n    if (!res.ok) {\n      return res.json().then((error) => {\n        const errorMessage = `Error: ${res.status} - ${error.message}`;\n        throw new Error(errorMessage);\n      });\n    }\n    return res.json();\n  }\n\n  _handleRequest(url, method, body = null) {\n    const token = localStorage.getItem(\"jwt\");\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: token ? `Bearer ${token}` : undefined,\n      ...this.headers,\n    };\n\n    const requestOptions = {\n      method: method,\n      headers: headers,\n    };\n\n    if (body) {\n      requestOptions.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this.baseUrl}${url}`, requestOptions)\n      .then((response) => this._handleResponse(response))\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n  updatedAuthUserToken = (token) => {\n    this.headers = { ...this.headers, Authorization: `Bearer ${token}` };\n  };\n\n  getInitialCards() {\n    return this._handleRequest(\"/cards\", \"GET\");\n  }\n\n  getUserInfo() {\n    return this._handleRequest(\"/users/me\", \"GET\");\n  }\n\n  editUserInfo(data) {\n    return this._handleRequest(\"/users/me\", \"PATCH\", {\n      name: data.name,\n      about: data.about,\n    });\n  }\n\n  editAvatar(avatar) {\n    return this._handleRequest(\"/users/me/avatar\", \"PATCH\", {\n      avatar: avatar,\n    });\n  }\n\n  postNewCard(card) {\n    return this._handleRequest(\"/cards\", \"POST\", {\n      name: card.name,\n      link: card.link,\n    });\n  }\n\n  deleteCard(cardId) {\n    return this._handleRequest(`/cards/${cardId}`, \"DELETE\");\n  }\n\n  setCardIcons() {\n    return this._handleRequest(\"/users/me\", \"GET\");\n  }\n\n  cardLiked(cardId) {\n    return this._handleRequest(`/cards/likes/${cardId}`, \"PUT\");\n  }\n\n  cardUnliked(cardId) {\n    return this._handleRequest(`/cards/likes/${cardId}`, \"DELETE\");\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return this._handleRequest(\n      `/cards/likes/${cardId}`,\n      isLiked ? \"PUT\" : \"DELETE\"\n    );\n  }\n}\n\nconst api = new Api({\n  baseUrl:\n    process.env.REACT_APP_API_BASE_URL ||\n    \"https://api.stephanydev.justlearning.net\",\n});\n\nexport default api;\n"],"mappings":"4eAAM,CAAAA,GAAG,yBACP,SAAAA,IAAAC,IAAA,CAAkC,KAAAC,KAAA,SAApB,CAAAC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAEC,OAAO,CAAAH,IAAA,CAAPG,OAAO,CAAAC,eAAA,MAAAL,GAAA,OAuC9BM,oBAAoB,CAAG,SAACC,KAAK,CAAK,CAChCL,KAAI,CAACE,OAAO,CAAAI,aAAA,CAAAA,aAAA,IAAQN,KAAI,CAACE,OAAO,MAAEK,aAAa,WAAAC,MAAA,CAAYH,KAAK,CAAE,EAAE,CACtE,CAAC,CAxCC,IAAI,CAACJ,OAAO,CAAGA,OAAO,CACtB,IAAI,CAACC,OAAO,CAAGA,OAAO,EAAI,CAAC,CAAC,CAC9B,CAACO,YAAA,CAAAX,GAAA,GAAAY,GAAA,mBAAAC,KAAA,CAED,SAAAC,gBAAgBC,GAAG,CAAE,CACnB,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACX,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CAACC,IAAI,CAAC,SAACC,KAAK,CAAK,CAChC,GAAM,CAAAC,YAAY,WAAAV,MAAA,CAAaK,GAAG,CAACM,MAAM,QAAAX,MAAA,CAAMS,KAAK,CAACG,OAAO,CAAE,CAC9D,KAAM,IAAI,CAAAC,KAAK,CAACH,YAAY,CAAC,CAC/B,CAAC,CAAC,CACJ,CACA,MAAO,CAAAL,GAAG,CAACE,IAAI,CAAC,CAAC,CACnB,CAAC,GAAAL,GAAA,kBAAAC,KAAA,CAED,SAAAW,eAAeC,GAAG,CAAEC,MAAM,CAAe,KAAAC,MAAA,SAAb,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACrC,GAAM,CAAAtB,KAAK,CAAGyB,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CACzC,GAAM,CAAA7B,OAAO,CAAAI,aAAA,EACX,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAEF,KAAK,WAAAG,MAAA,CAAaH,KAAK,EAAKwB,SAAS,EACjD,IAAI,CAAC3B,OAAO,CAChB,CAED,GAAM,CAAA8B,cAAc,CAAG,CACrBR,MAAM,CAAEA,MAAM,CACdtB,OAAO,CAAEA,OACX,CAAC,CAED,GAAIwB,IAAI,CAAE,CACRM,cAAc,CAACN,IAAI,CAAGO,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CAC5C,CAEA,MAAO,CAAAS,KAAK,IAAA3B,MAAA,CAAI,IAAI,CAACP,OAAO,EAAAO,MAAA,CAAGe,GAAG,EAAIS,cAAc,CAAC,CAClDhB,IAAI,CAAC,SAACoB,QAAQ,QAAK,CAAAX,MAAI,CAACb,eAAe,CAACwB,QAAQ,CAAC,GAAC,CAClDC,KAAK,CAAC,SAACpB,KAAK,CAAK,CAChBqB,OAAO,CAACrB,KAAK,CAACA,KAAK,CAAC,CACtB,CAAC,CAAC,CACN,CAAC,GAAAP,GAAA,mBAAAC,KAAA,CAMD,SAAA4B,gBAAA,CAAkB,CAChB,MAAO,KAAI,CAACjB,cAAc,CAAC,QAAQ,CAAE,KAAK,CAAC,CAC7C,CAAC,GAAAZ,GAAA,eAAAC,KAAA,CAED,SAAA6B,YAAA,CAAc,CACZ,MAAO,KAAI,CAAClB,cAAc,CAAC,WAAW,CAAE,KAAK,CAAC,CAChD,CAAC,GAAAZ,GAAA,gBAAAC,KAAA,CAED,SAAA8B,aAAaC,IAAI,CAAE,CACjB,MAAO,KAAI,CAACpB,cAAc,CAAC,WAAW,CAAE,OAAO,CAAE,CAC/CqB,IAAI,CAAED,IAAI,CAACC,IAAI,CACfC,KAAK,CAAEF,IAAI,CAACE,KACd,CAAC,CAAC,CACJ,CAAC,GAAAlC,GAAA,cAAAC,KAAA,CAED,SAAAkC,WAAWC,MAAM,CAAE,CACjB,MAAO,KAAI,CAACxB,cAAc,CAAC,kBAAkB,CAAE,OAAO,CAAE,CACtDwB,MAAM,CAAEA,MACV,CAAC,CAAC,CACJ,CAAC,GAAApC,GAAA,eAAAC,KAAA,CAED,SAAAoC,YAAYC,IAAI,CAAE,CAChB,MAAO,KAAI,CAAC1B,cAAc,CAAC,QAAQ,CAAE,MAAM,CAAE,CAC3CqB,IAAI,CAAEK,IAAI,CAACL,IAAI,CACfM,IAAI,CAAED,IAAI,CAACC,IACb,CAAC,CAAC,CACJ,CAAC,GAAAvC,GAAA,cAAAC,KAAA,CAED,SAAAuC,WAAWC,MAAM,CAAE,CACjB,MAAO,KAAI,CAAC7B,cAAc,WAAAd,MAAA,CAAW2C,MAAM,EAAI,QAAQ,CAAC,CAC1D,CAAC,GAAAzC,GAAA,gBAAAC,KAAA,CAED,SAAAyC,aAAA,CAAe,CACb,MAAO,KAAI,CAAC9B,cAAc,CAAC,WAAW,CAAE,KAAK,CAAC,CAChD,CAAC,GAAAZ,GAAA,aAAAC,KAAA,CAED,SAAA0C,UAAUF,MAAM,CAAE,CAChB,MAAO,KAAI,CAAC7B,cAAc,iBAAAd,MAAA,CAAiB2C,MAAM,EAAI,KAAK,CAAC,CAC7D,CAAC,GAAAzC,GAAA,eAAAC,KAAA,CAED,SAAA2C,YAAYH,MAAM,CAAE,CAClB,MAAO,KAAI,CAAC7B,cAAc,iBAAAd,MAAA,CAAiB2C,MAAM,EAAI,QAAQ,CAAC,CAChE,CAAC,GAAAzC,GAAA,wBAAAC,KAAA,CAED,SAAA4C,qBAAqBJ,MAAM,CAAEK,OAAO,CAAE,CACpC,MAAO,KAAI,CAAClC,cAAc,iBAAAd,MAAA,CACR2C,MAAM,EACtBK,OAAO,CAAG,KAAK,CAAG,QACpB,CAAC,CACH,CAAC,WAAA1D,GAAA,KAGH,GAAM,CAAA2D,GAAG,CAAG,GAAI,CAAA3D,GAAG,CAAC,CAClBG,OAAO,CACLyD,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAClC,0CACJ,CAAC,CAAC,CAEF,cAAe,CAAAH,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _slicedToArray from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Login from\"./Login\";import Register from\"./Register\";import ProtectedRoute from\"./ProtectedRoute\";import AroundUs from\"./AroundUs\";import{Route,Switch,Redirect,useHistory}from\"react-router-dom\";import*as auth from\"../utils/auth.js\";import InfoTooltip from\"./InfoTooltip\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){//login\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loggedIn=_React$useState2[0],setLoggedIn=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),authPopupState=_React$useState4[0],setAuthPopupState=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),mode=_React$useState6[0],setMode=_React$useState6[1];var _React$useState7=React.useState({message:\"\"}),_React$useState8=_slicedToArray(_React$useState7,2),message=_React$useState8[0],setMessage=_React$useState8[1];//userInfo\nvar _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),userEmail=_React$useState10[0],setUserEmail=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),userPassword=_React$useState12[0],setUserPassword=_React$useState12[1];var history=useHistory();//resetForm\nfunction resetForm(){setUserEmail(\"\");setUserPassword(\"\");}//login\nfunction closePopup(){setAuthPopupState(false);}function renderSuccess(){setMode(true);setAuthPopupState(true);setMessage({message:\"¡Correcto! Ya estás registrado.\"});}function renderFailure(){setMode(false);setAuthPopupState(true);setMessage({message:\"Uy, algo salió mal. Por favor, inténtalo de nuevo.\"});}function authorize(){return auth.authorize(userEmail,userPassword).then(function(data){if(!data){renderFailure();throw new Error(\"Uy, algo salió mal.\");}if(data.token){setLoggedIn(true);}}).then(resetForm).then(function(){return history.push(\"/\");}).catch(function(err){console.log(err);renderFailure();});}//signup\nfunction register(){return auth.register(userEmail,userPassword).then(function(res){if(!res||res.statusCode===400){renderFailure();throw new Error(\"Uy, algo salió mal.\");}renderSuccess();}).then(resetForm).then(function(){return history.push(\"/signin\");}).catch(function(err){console.log(err);renderFailure();});}//logout\nfunction signOut(){localStorage.removeItem(\"jwt\");setLoggedIn(false);setUserEmail(\"\");history.push(\"/signin\");}React.useEffect(function(){//token check\nvar jwt=localStorage.getItem(\"jwt\");if(jwt){auth.getContent(jwt).then(function(res){if(res){setLoggedIn(true);history.push(\"/main\");}}).catch(function(err){console.log(err);});}},[history]);return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/main\",loggedIn:loggedIn,email:userEmail,component:AroundUs,signOut:signOut,closePopup:closePopup,message:message,mode:mode,setUserEmail:setUserEmail}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[/*#__PURE__*/_jsx(Login,{loggedIn:loggedIn,title:\"Iniciar Sesi\\xF3n\",value:\"\\xBFA\\xFAn no eres miembro? Reg\\xEDstrate aqu\\xED\",link:\"/signup\",redirect:\"Reg\\xEDstrate\",setLoggedIn:setLoggedIn,signOut:signOut,renderFailure:renderFailure,renderSuccess:renderSuccess,authorize:authorize,userEmail:userEmail,userPassword:userPassword,setUserEmail:setUserEmail,setUserPassword:setUserPassword}),/*#__PURE__*/_jsx(InfoTooltip,{popupState:authPopupState,closePopup:closePopup,message:message,mode:mode})]})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"registerContainer\",children:[/*#__PURE__*/_jsx(Register,{loggedIn:loggedIn,title:\"Reg\\xEDstrate\",value:\"\\xBFYa eres miembro? Inicia sesi\\xF3n aqu\\xED\",link:\"/signin\",redirect:\"Inicia sesi\\xF3n\",setLoggedIn:setLoggedIn,signOut:signOut,renderFailure:renderFailure,renderSuccess:renderSuccess,register:register,userEmail:userEmail,userPassword:userPassword,setUserEmail:setUserEmail,setUserPassword:setUserPassword}),/*#__PURE__*/_jsx(InfoTooltip,{popupState:authPopupState,closePopup:closePopup,message:message,mode:mode})]})}),/*#__PURE__*/_jsx(Route,{children:loggedIn?/*#__PURE__*/_jsx(Redirect,{to:\"/main\"}):/*#__PURE__*/_jsx(Redirect,{to:\"/signin\"})})]})});}export default App;","map":{"version":3,"names":["React","Login","Register","ProtectedRoute","AroundUs","Route","Switch","Redirect","useHistory","auth","InfoTooltip","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","loggedIn","setLoggedIn","_React$useState3","_React$useState4","authPopupState","setAuthPopupState","_React$useState5","_React$useState6","mode","setMode","_React$useState7","message","_React$useState8","setMessage","_React$useState9","_React$useState10","userEmail","setUserEmail","_React$useState11","_React$useState12","userPassword","setUserPassword","history","resetForm","closePopup","renderSuccess","renderFailure","authorize","then","data","Error","token","push","catch","err","console","log","register","res","statusCode","signOut","localStorage","removeItem","useEffect","jwt","getItem","getContent","className","children","path","email","component","title","value","link","redirect","popupState","to"],"sources":["/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/App.js"],"sourcesContent":["import React from \"react\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport AroundUs from \"./AroundUs\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport * as auth from \"../utils/auth.js\";\nimport InfoTooltip from \"./InfoTooltip\";\n\nfunction App() {\n  //login\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [authPopupState, setAuthPopupState] = React.useState(false);\n  const [mode, setMode] = React.useState(false);\n  const [message, setMessage] = React.useState({ message: \"\" });\n\n  //userInfo\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const [userPassword, setUserPassword] = React.useState(\"\");\n\n  const history = useHistory();\n\n  //resetForm\n  function resetForm() {\n    setUserEmail(\"\");\n    setUserPassword(\"\");\n  }\n\n  //login\n  function closePopup() {\n    setAuthPopupState(false);\n  }\n\n  function renderSuccess() {\n    setMode(true);\n    setAuthPopupState(true);\n    setMessage({ message: \"¡Correcto! Ya estás registrado.\" });\n  }\n\n  function renderFailure() {\n    setMode(false);\n    setAuthPopupState(true);\n    setMessage({\n      message: \"Uy, algo salió mal. Por favor, inténtalo de nuevo.\",\n    });\n  }\n\n  function authorize() {\n    return auth\n      .authorize(userEmail, userPassword)\n      .then((data) => {\n        if (!data) {\n          renderFailure();\n          throw new Error(\"Uy, algo salió mal.\");\n        }\n        if (data.token) {\n          setLoggedIn(true);\n        }\n      })\n      .then(resetForm)\n      .then(() => history.push(\"/\"))\n      .catch((err) => {\n        console.log(err);\n        renderFailure();\n      });\n  }\n\n  //signup\n  function register() {\n    return auth\n      .register(userEmail, userPassword)\n      .then((res) => {\n        if (!res || res.statusCode === 400) {\n          renderFailure();\n          throw new Error(\"Uy, algo salió mal.\");\n        }\n        renderSuccess();\n      })\n      .then(resetForm)\n      .then(() => history.push(\"/signin\"))\n      .catch((err) => {\n        console.log(err);\n        renderFailure();\n      });\n  }\n\n  //logout\n  function signOut() {\n    localStorage.removeItem(\"jwt\");\n    setLoggedIn(false);\n    setUserEmail(\"\");\n    history.push(\"/signin\");\n  }\n\n  React.useEffect(() => {\n    //token check\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            history.push(\"/main\");\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [history]);\n\n  return (\n    <div className=\"page\">\n      <Switch>\n        <ProtectedRoute\n          path=\"/main\"\n          loggedIn={loggedIn}\n          email={userEmail}\n          component={AroundUs}\n          signOut={signOut}\n          closePopup={closePopup}\n          message={message}\n          mode={mode}\n          setUserEmail={setUserEmail}\n        />\n        <Route path=\"/signin\">\n          <div className=\"loginContainer\">\n            <Login\n              loggedIn={loggedIn}\n              title=\"Iniciar Sesión\"\n              value=\"¿Aún no eres miembro? Regístrate aquí\"\n              link=\"/signup\"\n              redirect=\"Regístrate\"\n              setLoggedIn={setLoggedIn}\n              signOut={signOut}\n              renderFailure={renderFailure}\n              renderSuccess={renderSuccess}\n              authorize={authorize}\n              userEmail={userEmail}\n              userPassword={userPassword}\n              setUserEmail={setUserEmail}\n              setUserPassword={setUserPassword}\n            />\n            <InfoTooltip\n              popupState={authPopupState}\n              closePopup={closePopup}\n              message={message}\n              mode={mode}\n            />\n          </div>\n        </Route>\n        <Route path=\"/signup\">\n          <div className=\"registerContainer\">\n            <Register\n              loggedIn={loggedIn}\n              title=\"Regístrate\"\n              value=\"¿Ya eres miembro? Inicia sesión aquí\"\n              link=\"/signin\"\n              redirect=\"Inicia sesión\"\n              setLoggedIn={setLoggedIn}\n              signOut={signOut}\n              renderFailure={renderFailure}\n              renderSuccess={renderSuccess}\n              register={register}\n              userEmail={userEmail}\n              userPassword={userPassword}\n              setUserEmail={setUserEmail}\n              setUserPassword={setUserPassword}\n            />\n            <InfoTooltip\n              popupState={authPopupState}\n              closePopup={closePopup}\n              message={message}\n              mode={mode}\n            />\n          </div>\n        </Route>\n        <Route>\n          {loggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/signin\" />}\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
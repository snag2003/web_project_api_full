{"ast":null,"code":"import _objectSpread from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var _this=this;var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this.updatedAuthUserToken=function(token){_this.headers=_objectSpread(_objectSpread({},_this.headers),{},{authorization:\"Bearer \".concat(token)});};this.baseUrl=baseUrl;this.headers=headers;}_createClass(Api,[{key:\"_handleResponse\",value:function _handleResponse(res){if(!res.ok){var errorMessage=\"Error: \".concat(res.status);throw new Error(errorMessage);}return res.json();}},{key:\"_handleRequest\",value:function _handleRequest(url,method){var _this2=this;var body=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var requestOptions={method:method,headers:this.headers,body:body?JSON.stringify(body):null};return fetch(\"\".concat(this.baseUrl).concat(url),requestOptions).then(function(response){return _this2._handleResponse(response);}).catch(function(error){console.log(error);});}},{key:\"getInitialCards\",value:function getInitialCards(){return this._handleRequest(\"/cards\",\"GET\");}},{key:\"getUserInfo\",value:function getUserInfo(){return this._handleRequest(\"/users/me\",\"GET\");}},{key:\"editUserInfo\",value:function editUserInfo(data){return this._handleRequest(\"/users/me\",\"PATCH\",{name:data.name,about:data.about});}},{key:\"editAvatar\",value:function editAvatar(avatar){return this._handleRequest(\"/users/me/avatar\",\"PATCH\",{avatar:avatar});}},{key:\"postNewCard\",value:function postNewCard(card){return this._handleRequest(\"/cards\",\"POST\",{name:card.name,link:card.link});}},{key:\"deleteCard\",value:function deleteCard(cardId){return this._handleRequest(\"/cards/\".concat(cardId),\"DELETE\");}},{key:\"setCardIcons\",value:function setCardIcons(){return this._handleRequest(\"/users/me\",\"GET\");}},{key:\"cardLiked\",value:function cardLiked(cardId){return this._handleRequest(\"/cards/likes/\".concat(cardId),\"PUT\");}},{key:\"cardUnliked\",value:function cardUnliked(cardId){return this._handleRequest(\"/cards/likes/\".concat(cardId),\"DELETE\");}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){return this._handleRequest(\"/cards/likes/\".concat(cardId),isLiked?\"PUT\":\"DELETE\");}}]);return Api;}();var api=new Api({baseUrl:\"https://api.stephanydev.justlearning.net\",headers:headers});export default api;","map":{"version":3,"names":["Api","_ref","_this","baseUrl","headers","_classCallCheck","updatedAuthUserToken","token","_objectSpread","authorization","concat","_createClass","key","value","_handleResponse","res","ok","errorMessage","status","Error","json","_handleRequest","url","method","_this2","body","arguments","length","undefined","requestOptions","JSON","stringify","fetch","then","response","catch","error","console","log","getInitialCards","getUserInfo","editUserInfo","data","name","about","editAvatar","avatar","postNewCard","card","link","deleteCard","cardId","setCardIcons","cardLiked","cardUnliked","changeLikeCardStatus","isLiked","api"],"sources":["/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  updatedAuthUserToken = (token) => {\n    this.headers = { ...this.headers, authorization: `Bearer ${token}` };\n  };\n\n  _handleResponse(res) {\n    if (!res.ok) {\n      const errorMessage = `Error: ${res.status}`;\n      throw new Error(errorMessage);\n    }\n    return res.json();\n  }\n\n  _handleRequest(url, method, body = null) {\n    const requestOptions = {\n      method,\n      headers: this.headers,\n      body: body ? JSON.stringify(body) : null,\n    };\n\n    return fetch(`${this.baseUrl}${url}`, requestOptions)\n      .then((response) => this._handleResponse(response))\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  getInitialCards() {\n    return this._handleRequest(\"/cards\", \"GET\");\n  }\n\n  getUserInfo() {\n    return this._handleRequest(\"/users/me\", \"GET\");\n  }\n\n  editUserInfo(data) {\n    return this._handleRequest(\"/users/me\", \"PATCH\", {\n      name: data.name,\n      about: data.about,\n    });\n  }\n\n  editAvatar(avatar) {\n    return this._handleRequest(\"/users/me/avatar\", \"PATCH\", {\n      avatar: avatar,\n    });\n  }\n\n  postNewCard(card) {\n    return this._handleRequest(\"/cards\", \"POST\", {\n      name: card.name,\n      link: card.link,\n    });\n  }\n\n  deleteCard(cardId) {\n    return this._handleRequest(`/cards/${cardId}`, \"DELETE\");\n  }\n\n  setCardIcons() {\n    return this._handleRequest(\"/users/me\", \"GET\");\n  }\n\n  cardLiked(cardId) {\n    return this._handleRequest(`/cards/likes/${cardId}`, \"PUT\");\n  }\n\n  cardUnliked(cardId) {\n    return this._handleRequest(`/cards/likes/${cardId}`, \"DELETE\");\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return this._handleRequest(\n      `/cards/likes/${cardId}`,\n      isLiked ? \"PUT\" : \"DELETE\"\n    );\n  }\n}\n\nconst api = new Api({\n  baseUrl: \"https://api.stephanydev.justlearning.net\",\n  headers,\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _classCallCheck from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this.baseUrl=baseUrl;this.headers=headers;}_createClass(Api,[{key:\"_handleResponse\",value:function _handleResponse(res){if(!res.ok){var errorMessage=\"Error: \".concat(res.status);throw new Error(errorMessage);}return res.json();}},{key:\"_handleRequest\",value:function _handleRequest(url,method){var _this=this;var body=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var token=localStorage.getItem(\"jwt\");var headers={\"Content-Type\":\"application/json\"};if(token){headers.Authorization=\"Bearer \".concat(token);}var requestOptions={method:method,headers:headers};if(body){requestOptions.body=JSON.stringify(body);}return fetch(\"\".concat(this.baseUrl).concat(url),requestOptions).then(function(response){return _this._handleResponse(response);}).catch(function(error){console.log(error);});}},{key:\"getInitialCards\",value:function getInitialCards(){return this._handleRequest(\"/cards\",\"GET\");}},{key:\"getUserInfo\",value:function getUserInfo(){return this._handleRequest(\"/users/me\",\"GET\");}},{key:\"editUserInfo\",value:function editUserInfo(data){return this._handleRequest(\"/users/me\",\"PATCH\",{name:data.name,about:data.about});}},{key:\"editAvatar\",value:function editAvatar(avatar){return this._handleRequest(\"/users/me/avatar\",\"PATCH\",{avatar:avatar});}},{key:\"postNewCard\",value:function postNewCard(card){return this._handleRequest(\"/cards\",\"POST\",{name:card.name,link:card.link});}},{key:\"deleteCard\",value:function deleteCard(cardId){return this._handleRequest(\"/cards/\".concat(cardId),\"DELETE\");}},{key:\"setCardIcons\",value:function setCardIcons(){return this._handleRequest(\"/users/me\",\"GET\");}},{key:\"cardLiked\",value:function cardLiked(cardId){return this._handleRequest(\"/cards/likes/\".concat(cardId),\"PUT\");}},{key:\"cardUnliked\",value:function cardUnliked(cardId){return this._handleRequest(\"/cards/likes/\".concat(cardId),\"DELETE\");}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){return this._handleRequest(\"/cards/likes/\".concat(cardId),isLiked?\"PUT\":\"DELETE\");}}]);return Api;}();var api=new Api({baseUrl:\"https://api.stephanydev.justlearning.net\"});export default api;","map":{"version":3,"names":["Api","_ref","baseUrl","headers","_classCallCheck","_createClass","key","value","_handleResponse","res","ok","errorMessage","concat","status","Error","json","_handleRequest","url","method","_this","body","arguments","length","undefined","token","localStorage","getItem","Authorization","requestOptions","JSON","stringify","fetch","then","response","catch","error","console","log","getInitialCards","getUserInfo","editUserInfo","data","name","about","editAvatar","avatar","postNewCard","card","link","deleteCard","cardId","setCardIcons","cardLiked","cardUnliked","changeLikeCardStatus","isLiked","api"],"sources":["/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  _handleResponse(res) {\n    if (!res.ok) {\n      const errorMessage = `Error: ${res.status}`;\n      throw new Error(errorMessage);\n    }\n    return res.json();\n  }\n\n  _handleRequest(url, method, body = null) {\n    const token = localStorage.getItem(\"jwt\");\n    const headers = {\n      \"Content-Type\": \"application/json\",\n    };\n\n    if (token) {\n      headers.Authorization = `Bearer ${token}`;\n    }\n\n    const requestOptions = {\n      method: method,\n      headers: headers,\n    };\n\n    if (body) {\n      requestOptions.body = JSON.stringify(body);\n    }\n    return fetch(`${this.baseUrl}${url}`, requestOptions)\n      .then((response) => this._handleResponse(response))\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  getInitialCards() {\n    return this._handleRequest(\"/cards\", \"GET\");\n  }\n\n  getUserInfo() {\n    return this._handleRequest(\"/users/me\", \"GET\");\n  }\n\n  editUserInfo(data) {\n    return this._handleRequest(\"/users/me\", \"PATCH\", {\n      name: data.name,\n      about: data.about,\n    });\n  }\n\n  editAvatar(avatar) {\n    return this._handleRequest(\"/users/me/avatar\", \"PATCH\", {\n      avatar: avatar,\n    });\n  }\n\n  postNewCard(card) {\n    return this._handleRequest(\"/cards\", \"POST\", {\n      name: card.name,\n      link: card.link,\n    });\n  }\n\n  deleteCard(cardId) {\n    return this._handleRequest(`/cards/${cardId}`, \"DELETE\");\n  }\n\n  setCardIcons() {\n    return this._handleRequest(\"/users/me\", \"GET\");\n  }\n\n  cardLiked(cardId) {\n    return this._handleRequest(`/cards/likes/${cardId}`, \"PUT\");\n  }\n\n  cardUnliked(cardId) {\n    return this._handleRequest(`/cards/likes/${cardId}`, \"DELETE\");\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return this._handleRequest(\n      `/cards/likes/${cardId}`,\n      isLiked ? \"PUT\" : \"DELETE\"\n    );\n  }\n}\n\nconst api = new Api({\n  baseUrl: \"https://api.stephanydev.justlearning.net\",\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
[{"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/index.js":"1","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/App.js":"2","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/auth.js":"3","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/ProtectedRoute.js":"4","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/InfoTooltip.js":"5","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Login.js":"6","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Register.js":"7","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Main.js":"8","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/PopupWithForm.js":"9","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/EditProfilePopup.js":"10","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/EditAvatarPopup.js":"11","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Header.js":"12","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Footer.js":"13","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/AddPlacePopup.js":"14","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/api.js":"15","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/contexts/CurrentUserContext.js":"16","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Card.js":"17","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/Api.js":"18","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/InfoToolTip.js":"19","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Authorize.js":"20","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/AroundUs.js":"21","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/PopupWithImage.js":"22"},{"size":323,"mtime":1699066707949,"results":"23","hashOfConfig":"24"},{"size":5473,"mtime":1702264317101,"results":"25","hashOfConfig":"24"},{"size":1429,"mtime":1702264288227,"results":"26","hashOfConfig":"24"},{"size":317,"mtime":1702264667328,"results":"27","hashOfConfig":"24"},{"size":805,"mtime":1699118181538,"results":"28","hashOfConfig":"24"},{"size":899,"mtime":1702254065519,"results":"29","hashOfConfig":"24"},{"size":847,"mtime":1702254098334,"results":"30","hashOfConfig":"24"},{"size":1913,"mtime":1702264621141,"results":"31","hashOfConfig":"24"},{"size":924,"mtime":1702255359726,"results":"32","hashOfConfig":"24"},{"size":2016,"mtime":1702264577368,"results":"33","hashOfConfig":"24"},{"size":961,"mtime":1702264567268,"results":"34","hashOfConfig":"24"},{"size":1142,"mtime":1702254211680,"results":"35","hashOfConfig":"24"},{"size":179,"mtime":1702254224765,"results":"36","hashOfConfig":"24"},{"size":1516,"mtime":1702264536153,"results":"37","hashOfConfig":"24"},{"size":3139,"mtime":1702265650026,"results":"38","hashOfConfig":"24"},{"size":87,"mtime":1694827693044,"results":"39","hashOfConfig":"24"},{"size":1572,"mtime":1702264552816,"results":"40","hashOfConfig":"24"},{"size":3664,"mtime":1702056611269,"results":"41","hashOfConfig":"24"},{"size":805,"mtime":1702264603507,"results":"42","hashOfConfig":"24"},{"size":1403,"mtime":1702066403000,"results":"43","hashOfConfig":"24"},{"size":5422,"mtime":1702264413335,"results":"44","hashOfConfig":"24"},{"size":696,"mtime":1702264650952,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","suppressedMessages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"pw90rm",{"filePath":"49","messages":"50","suppressedMessages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52"},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","suppressedMessages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","suppressedMessages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"98","messages":"99","suppressedMessages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","suppressedMessages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","suppressedMessages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","suppressedMessages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110"},{"filePath":"111","messages":"112","suppressedMessages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/index.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/App.js",["114","115","116"],[],"import React, { useState, useEffect } from \"react\";\nimport {\n  Route,\n  Switch,\n  withRouter,\n  useHistory,\n  Redirect,\n} from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport AroundUs from \"./AroundUs\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport * as auth from \"../utils/auth.js\";\nimport InfoToolTip from \"./InfoToolTip\";\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [authPopupState, setAuthPopupState] = React.useState(false);\n  const [mode, setMode] = useState(false);\n  const [message, setMessage] = useState({ message: \"\" });\n\n  const [userEmail, setUserEmail] = React.useState(\"\");\n  const [userPassword, setUserPassword] = React.useState(\"\");\n\n  const [registered, setRegistered] = useState(false);\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n\n  const history = useHistory();\n\n  //resetForm\n  function resetForm() {\n    setUserEmail(\"\");\n    setUserPassword(\"\");\n  }\n\n  //login\n  function closePopup() {\n    setAuthPopupState(false);\n  }\n\n  function renderSuccess() {\n    setMode(true);\n    setAuthPopupState(true);\n    setMessage({ message: \"¡Correcto! Ya estás registrado.\" });\n  }\n\n  function renderFailure() {\n    setMode(false);\n    setAuthPopupState(true);\n    setMessage({\n      message: \"Uy, algo salió mal. Por favor, inténtalo de nuevo.\",\n    });\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function authorize(e) {\n    auth\n      .authorize(userEmail, userPassword)\n      .then((data) => {\n        if (data && data.token) {\n          setToken(data.token);\n          localStorage.setItem(\"token\", data.token);\n          handleLogin();\n          history.push(\"/main\");\n        } else {\n          resetForm();\n          if (!userEmail || !userPassword) {\n            renderFailure();\n            throw new Error(\n              \"400 - one or more of the fields were not provided\"\n            );\n          }\n          if (!data) {\n            renderFailure();\n            throw new Error(\n              \"401 - the user with the specified email not found\"\n            );\n          }\n        }\n      })\n      .catch((err) => console.log(err.message));\n  }\n\n  function register(e) {\n    auth\n      .register(userEmail, userPassword)\n      .then((res) => {\n        //  if (!(res.data && res.data._id)) {\n        if (!(res && res._id)) {\n          renderFailure();\n          // throw new Error(`400 - ${res.message ? res.message : res.error}`);\n          // throw new Error(\n          //   `409(Conflict)  - ${res.message ? res.message : res.error}`\n          // );\n          if (res.status === 409) {\n            return Promise.reject(new Error(\"(Conflict) - User already taken\"));\n          }\n        } else {\n          renderSuccess();\n        }\n      })\n      .then((res) => {\n        setRegistered(true);\n        history.push(\"/signin\");\n        return res;\n      })\n      .then(resetForm)\n      .catch((err) => console.log(err));\n  }\n\n  function signOut() {\n    localStorage.removeItem(\"token\");\n    setLoggedIn(false);\n    setUserEmail(\"\");\n    history.push(\"/signin\");\n  }\n\n  return (\n    <div class=\"page\">\n      <Switch>\n        <ProtectedRoute\n          path=\"/main\"\n          loggedIn={loggedIn}\n          email={userEmail}\n          component={AroundUs}\n          signOut={signOut}\n          closePopup={closePopup}\n          message={message}\n          mode={mode}\n          setUserEmail={setUserEmail}\n        />\n        <Route exact path=\"/signin\">\n          <div className=\"loginContainer\">\n            <Login\n              loggedIn={loggedIn}\n              title=\"Iniciar Sesión\"\n              value=\"¿Aún no eres miembro? Regístrate aquí\"\n              link=\"/signup\"\n              redirect=\"Regístrate\"\n              setLoggedIn={setLoggedIn}\n              signOut={signOut}\n              renderFailure={renderFailure}\n              renderSuccess={renderSuccess}\n              authorize={authorize}\n              userEmail={userEmail}\n              userPassword={userPassword}\n              setUserEmail={setUserEmail}\n              setUserPassword={setUserPassword}\n            />\n            <InfoToolTip\n              popupState={authPopupState}\n              closePopup={closePopup}\n              message={message}\n              mode={mode}\n            />\n          </div>\n        </Route>\n        <Route path=\"/signup\">\n          <div className=\"registerContainer\">\n            <Register\n              loggedIn={loggedIn}\n              title=\"Regístrate\"\n              value=\"¿Ya eres miembro? Inicia sesión aquí\"\n              link=\"/signin\"\n              redirect=\"Inicia sesión\"\n              setLoggedIn={setLoggedIn}\n              signOut={signOut}\n              renderFailure={renderFailure}\n              renderSuccess={renderSuccess}\n              register={register}\n              userEmail={userEmail}\n              userPassword={userPassword}\n              setUserEmail={setUserEmail}\n              setUserPassword={setUserPassword}\n            />\n            <InfoToolTip\n              popupState={authPopupState}\n              closePopup={closePopup}\n              message={message}\n              mode={mode}\n            />\n          </div>\n        </Route>\n        <Route exact path=\"/\">\n          {loggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/signin\" />}\n        </Route>\n        <Redirect from=\"*\" to=\"/\" />\n      </Switch>\n    </div>\n  );\n}\n\nexport default withRouter(App);\n","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/auth.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/ProtectedRoute.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/InfoTooltip.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Login.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Register.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Main.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/PopupWithForm.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/EditProfilePopup.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/EditAvatarPopup.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Header.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Footer.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/AddPlacePopup.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/api.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/contexts/CurrentUserContext.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Card.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/utils/Api.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/InfoToolTip.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/Authorize.js",[],[],"/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/AroundUs.js",["117","118"],[],"import { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport PopupWithImage from \"./PopupWithImage.js\";\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport * as auth from \"../utils/auth.js\";\n\nfunction AroundUs(props) {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({\n    link: \"\",\n    name: \"\",\n  });\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n\n  const [currentUser, setCurrentUser] = useState({});\n\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\n\n  const [cards, setCards] = useState([]);\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard({ link: card.link, name: card.name });\n    setIsImagePopupOpen(true);\n  }\n  function closeAllPopups(evt) {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked, token).then((newCard) => {\n      setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n    });\n  }\n\n  function handleCardDelete(cardProps) {\n    api\n      .deleteCard(cardProps.card._id, token)\n      .then(() => {\n        const newCards = cards.filter((c) => {\n          return c._id !== cardProps.card._id;\n        });\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateUser(info) {\n    api\n      .updateProfile(info, token)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleAddPlaceSubmit(cardProps) {\n    api\n      .postNewCard(cardProps, token)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(avatarInput) {\n    api\n      .editAvatar(avatarInput.avatar, token)\n      .then((newUser) => {\n        setCurrentUser(newUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  useEffect(() => {\n    api\n      .getUserInfo(token)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .then(() => {\n        api\n          .getInitialCards(token)\n          .then((res) => {\n            setCards(\n              res.map((card) => ({\n                link: card.link,\n                name: card.name,\n                likes: card.likes,\n                _id: card._id,\n                owner: card.owner,\n              }))\n            );\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [token]);\n\n  useEffect(() => {\n    if (token) {\n      auth\n        .getContent(token)\n        .then((res) => {\n          if (res) {\n            props.setUserEmail(res.data.email);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [token]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header\n          redirect=\"Cerrar Sesión\"\n          link=\"/signin\"\n          email={props.email}\n          signOut={props.signOut}\n        />\n        <Main\n          onEditAvatarClick={handleEditAvatarClick}\n          onAddPlaceClick={handleAddPlaceClick}\n          onEditProfileClick={handleEditProfileClick}\n          cards={cards}\n          onCardClick={(card) => handleCardClick(card)}\n          onCardLike={(card) => handleCardLike(card)}\n          onCardDelete={(card) => handleCardDelete(card)}\n        ></Main>\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlaceSubmit={handleAddPlaceSubmit}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <PopupWithForm\n          name=\"delete\"\n          title=\"¿Estás seguro?\"\n          buttonValue=\"Sí\"\n          onClose={closeAllPopups}\n        ></PopupWithForm>\n        <PopupWithImage\n          isOpen={isImagePopupOpen}\n          link={selectedCard.link}\n          name={selectedCard.name}\n          onClose={closeAllPopups}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default AroundUs;\n","/Users/stephanyacosta/Desktop/Practicum Projects/web_project_api_full/frontend/src/components/PopupWithImage.js",[],[],{"ruleId":"119","severity":1,"message":"120","line":1,"column":27,"nodeType":"121","messageId":"122","endLine":1,"endColumn":36},{"ruleId":"119","severity":1,"message":"123","line":25,"column":10,"nodeType":"121","messageId":"122","endLine":25,"endColumn":20},{"ruleId":"119","severity":1,"message":"124","line":26,"column":10,"nodeType":"121","messageId":"122","endLine":26,"endColumn":15},{"ruleId":"119","severity":1,"message":"125","line":26,"column":17,"nodeType":"121","messageId":"122","endLine":26,"endColumn":25},{"ruleId":"126","severity":1,"message":"127","line":147,"column":6,"nodeType":"128","endLine":147,"endColumn":13,"suggestions":"129"},"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'registered' is assigned a value but never used.","'token' is assigned a value but never used.","'setToken' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.","ArrayExpression",["130"],{"desc":"131","fix":"132"},"Update the dependencies array to be: [props, token]",{"range":"133","text":"134"},[3869,3876],"[props, token]"]